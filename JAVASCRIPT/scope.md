# 스코프 Scope

scope: 범위, 영역

변수를 참조할 수 있는(접근할 수 있는) 유효한 범위또는 식별자가 유효한 범위

여기서 식별자는 변수, 함수, 클래스 이름이다.

변수나 함수, 클래스가 어디에서 선언되었는지 어디에서 접근되었느냐에 따라서 유효 범위가 결정된다

**그렇다면 그 범위는 어떻게 결정할까?**

바로 블럭으로 구분짓는다

```jsx
{
	블럭 안의 변수는 **블럭 안**에서만 유효하다
}
```

예를 들어 블럭 안에서 a라는 변수를 선언하여 생성하였다면 블럭 밖에서는 접근할수도 참조할수도 없다.

바로 블럭 안에서 선언되었기 때문이다.

**그렇다면 왜 이런 스코프가 존재할까?**

- 이름 충돌 방지
- 메모리 절약

블럭 안의 변수는 블럭이 끝나는 순간 자동으로 메모리에서 제거가 된다.

변수가 어디까지 유효한지 범위를 지정해주면 이 변수는 블럭 안에서만 유효하고 블럭이 끝나면 제거해도 된다고 알려줄 수 있다.

**즉, 스코프란 변수, 함수, 클래스가 어디까지 유효한지 나타내는 범위, 영역이다.**

변수, 식별자는 최대한 필요한 곳에서 정의를 해야한다!

다음 예시를 보며 참고해보자

```jsx
{
  const a = 'a';
}

const b = 'b';
console.log(a);
```

→ a is not defined라는 에러가 뜨면서 앱이 크러쉬 된 것을 확인할 수 있다.

**그렇다면 함수의 경우는 어떨까?**

```jsx
function print() {
  const message = 'Hello World';
  console.log(message);
}

print(); //Hello World
```

→ 정상적으로 Hello World가 출력되는 것을 확인할 수 있다.

message는 print 함수 내부에서만 쓰이는 지역 변수, 로컬 변수이다.

```jsx
function print() {
  const message = 'Hello World';
  console.log(message);
}

print();
console.log(message);
```

→ 외부에서 호출하면 마찬가지로 접근이 불가능하다.

message is not defined라는 에러가 뜨며 앱이 crash되는 것을 확인할 수 있다.

**한 가지 예제를 더 보자**

```jsx
function sum(a, b) {
  console.log(a, b);
}

console.log(a, b);
```

이 경우에서도 외부에서 a와 b를 호출하려고 하면 호출이 불가능하다는 것을 확인할 수 있다.

즉, 블럭 외부에서는 블럭 내부의 변수를 참조할 수 없다.

함수 외부에서는 함수 내부의 변수를 참조할 수 없다

함수 외부에서는 함수의 매개변수를 참조할 수도 없다.

형태는 조금씩 달라지지만 원리는 모두 동일하다.

### 그렇다면 다음 예시를 한번 확인해보자

```jsx
{
  const x = 1;
  {
    const y = 2;
    console.log(x); //1
  }
  console.log(x); //1
  console.log(y);
}
```

이 경우에서는 어떤 값이 출력이 될까?

x는 안에 있는 코드 블럭에서 접근이 가능하지만 y는 내부 코드블럭에서 선언이 되었기 때문에 외부 코드블럭에서 접근이 불가능한 것을 알 수 있다.

즉, 상위에 있는 블럭은 참조할 수 있지만 외부에서는 참조할 수 없다!

**다음 예시를 보며 한번 더 확인해보자**

```jsx
const text = 'global';
{
  const text = 'inside block1';
  {
    console.log(text); //inside block1
  }
}
```

위와 같은 경우에는 어떤 text가 출력이 될까?

현재 구조가 global text는 전역 변수로 글로벌 스코프, 상위 스코프이다.

inside block1을 가진 text는 블록 내부에서 사용하고 있는 내부 변수이다.

블럭 안에 자식 블럭이 있다. 자식 블럭 안에는 text가 없으므로 가장 근접한 inside block1을 가지고 있는 text를 출력하는 것이다.

**그렇다면 이 경우는 어떻게 될까?**

```jsx
const text = 'global';
{
  {
    console.log(text); //global
  }
}
```

→ 바로 상위에 있던 text가 없으므로 외부에 있는 전역 변수인 global을 출력하는 것을 알 수 있다.

이처럼 스코프는 블럭 안에서 유효 범위가 설정되고 그 블럭 안에 없다면 외부의 전역 변수에 접근을 하게 된다.
