# CSS media

## 반응형 웹

- 최근 웹사이트 기반의 서비스를 모바일 또는 태블릿 화면에서 접속하는 경우가 많음
- 기존에는 부트스트랩이라는 프레임워크 기반으로 반응형 웹을 자동 구현하거나, 웹 퍼블리셔가 관련 처리를 하는 경우가 많았음
- 하지만, 최근에는 웹퍼블리셔가 없고, UX 디자이너가 스케치등의 UI 디자인 툴로 작업한 결과물을 기반으로 개발자가 직접 반응형까지 고려하여 구현을 해야 하는 경우가 많아지고 있음
- 또한, 풀스텍이 되어 혼자서도 그럴듯한 웹서비스를 만들려면 반응형 처리를 반드시 해 줘야 함

### 적응형 웹 vs 반응형 웹

- 적응형 웹 : 사용자가 모바일 환경인지, pc 환경인지에 따라 다른 페이지를 보여줌

→ 예) [yes24.com](http://yes24.com) 사이트를 모바일 환경에서 접속하면, 경우에 따라 자동으로 m.yes24.com을 보여주는 경우가 있다

- 반응형 웹: 동일한 웹페이지를 보여주되, 웹페이지를 보여주는 화면 사이즈에 따라, 다르게 보여줌

### pixel과 viewport

pixel이란, Picture Element의 줄임말로 화소라고 부른다

컴퓨터 디스플레이를 구성하는 최소 단위로, 각 픽셀에 색상을 표현해서, 디스플레이가 화면을 보여주는 것이다

예를 들면 320px\*480px의 해상도를 가진 디스플레이는 320x480=153,600 픽셀을 가지고 디스플레이 화면을 구성한다.

만약 320px*480px의 해상도를 가진 이미지를 3440px 1440px 스마트폰에서 볼 때와, 320px*480px 모바일 기기에서 볼 때를 가정해보자.

3440px 1440px 스마트폰에서는 매우 이미지가 작아보일 수 있다는 것이다.

**이러한 문제를 해결하기 위해, viewport라는 개념이 도입되었다.**

viewport는 화면상의 표시 영역을 의미하며, 스마트폰에서는 virtual viewport를 대부분 980px으로 설정해서, 마치 화면 가로 너비가 980px인 상태로 웹페이지가 표시되도록 해놓았다.

다만, 이 경우에도 화면 디스플레이 사이즈에 따라서 웹페이지가 매우 작게 보여서 가독성이 떨어질 수 있다.

- 사용자가 보기 편한 폰트 크기는 12~16px이지만 다양한 크기를 가진 스마트폰의 virtual viewport를 980px로 해놓는다면, 웹페이지에 따라서는 폰트가 매우 작게 표시가 될 수 있다.

**이를 해결할 수 있는 기능 meta viewport 설정**

다음과 같이 뷰포트에 원하는 너비를 넣으면, 해당 너비에 맞게 웹브라우저가 웹페이지를 표시한다.

해당 태그가 없다면, 대부분의 스마트폰에서 디폴트로 설정해놓은 980px에 맞게 웹페이지가 표시된다.

```jsx
<meta name='viewport' content='width=320'>
```

**다양한 디스플레이에 맞는 웹페이지 구현**

meta viewport에 width를 임의 숫자로 넣을 경우, 다양한 디스플레이 대응이 어렵다

그래서 각 기기에 알맞은 너비값을 가져올 수 있도록 한다

→ device-width

다음고 같이 작성하면, 웹브라우저가 각 기기로부터 알맞은 너비값을 가져와서 뷰포트를 설정하고, 이에 따라 웹페이지가 다양한 디바이스에 알맞게 보여지도록 설정됨

```jsx
<meta name='viewport' content='width=device-width'>
```

**각 기기의 알맞은 너비값은 디스플레이 해상도 너비가 아**

- PPl(Pixels Per Inch), 픽셀 밀도 (Pixel Density), 또는 화소 밀도란, 특정 공간에 얼마나 많은 화소가 있는지를 나타냄
  → 예: 40ppi 는 1 인지에 40개의 픽셀이 있다는 뜻임
- 애플이 레티나 디스플레이의 iPhone 을 선보였을 때, 인지당 픽셀을 두 배로 늘려서, 기존 보다 훨씬 선명한 화면을 구현하였으며, 이 때 PPI 개념이 화두가 되었다. 이후에는, 동일한 사이즈의 이미지 작성을 위해, 두 배의 픽셀 사이즈에서 작업을 해야 했다.
- 40 픽셀에 보여질 사이즈의 이미지를 만들기 위해서는 80 픽셀로 이미지를 작업해야 함 즉, 픽셀이라는 단위가 모호해지기 시작했다. 이 때, 40 픽셀에 보여질 이미지를 제작하기 위해, 80 픽셀로 이미지를 작업해야 하는 경우, 이 디스플레이의 pixel density 200% 으로 정의함
- 따라서, 일반적으로 device-width 는 디스플레이 해상도 너비 / pixel density로 계산되고, 이를 웹브라우저가 인식하여, meta viewport 태그에 적용하는 것이라고 이해하면 됨

### viewport meta 태그

위에서 언급한 대로 viewport meta 태그를 사용해서, 스마트폰에서도 웹페이지를 적절한 크기로 표시할 수 있으므로, 반응형 웹페이지의 첫 줄발은 viewport meta 태그를 설정하는 것임

**주요 프로퍼티**

| 프로퍼티      | 설명                                                                 | 주 사용 예           |
| ------------- | -------------------------------------------------------------------- | -------------------- |
| width         | viewport 너비 (단위: px)                                             | width=device-width   |
| height        | viewport 높이 (단위 : px)                                            | height=device-height |
| initial-scale | viewport 초기 배율 (디폴트 값: 1.0)                                  | initial-scale= 1.0   |
| user-scale    | 사용자가 웹페이지 확대 축소 가능 여부 (디폴트 값: yes)               | user-scale=no        |
| maximum-scale | viewport 최대 배율 (디폴트 값: 5.0, 0 ~ 10 범위의 값을 가질 수 있음) | maximum-scale=2.0    |
| minimum-scale | viewport 최소 배율(디폴트 값: 0.25. 0 ~ 10 범위의 값을 가질 수 있음) | minimum-scale= 1.0   |

## 레이아웃과 미디어 쿼리

### 레이아웃과 반응형 레이아웃

웹페이지에서 레이아웃이란, 각 페이지 구성 요소를 페이지 내에 효과적으로 배열하는 일을 의미한다

HTML을 사용해서 웹페이지의 각 구성 요소를 정의하고 css를 사용해서 각 구성 요소를 효과저긍로 배열한다.

### 반응형 레이아웃

html5에서 정의한 시맨틱 태그를 기반으로 일반적인 레이아웃 기반 반응형 레이아웃

pc 상에는 다음과 같이 배치한다

스마트폰 상에는 표시할 수 있는 영역이 작기 때문에 보통 aside는 밑에 위치하고 nav 영역은 자바스크립트로 숨겼다가 보여주거나 아이콘으로 대체하기도 함 이외에도 각 영역의 글자, 아이콘, 이미지 등도 모바일 화면에 알맞게 재구성한다.

### 미디어쿼리

• css 미디어 쿼리를 사용해서, 반응형 레이아웃을 구현할 수 있음
• 미디어 (media)는 장치 (device) 를 의미
• 미디어 쿼리란, 서로 다른 미디어 타입에 대응하기위한 기능으로 이해
→ 서로 다른 미디어 타입에 따라 각기 다른 스타일을 적용할 수 있는 기능
• CSS2 대비 가장 큰 추가 기능 중 하나가 반응형을 위한 미디어 쿼리
→ 반응형 웹의 핵심 기능은 @media 사용하는 것임

### 미디어 쿼리 기본 문법

```jsx
@medi a media-type and ( media-feature-rule ){
/• CSS rules go here •/
}
```

- media-type(미디어 유형) : 보통 all 또는 screen 사용
  - all(전체)
  - print (프린트 화면)
  - screen (브라우저 화연)
  - speech (음성)
- media-feature-rule: media (미디어) 조건
  이 중에서 min-width/max-width. orientation 정도가 많이 사용됨

| 프로퍼티      | 설명                                                                                     |
| ------------- | ---------------------------------------------------------------------------------------- |
| width         | viewport 너비 (단위: px), 보통 min-width, max-width 로 최소 너비/죄대 너비로 많이 사용함 |
| height        | viewport 높이 (단위: px)                                                                 |
| device-width  | 디바이스의 물리적 너비 (단위: px)                                                        |
| device-height | 디바이스의 물리적 높이 (단위: px)                                                        |
| aspect-ratio  | viewport의 가로세로비                                                                    |
| orientation   | 디바이스 방향 (가로 방향: landscape, 세로 방향: portrait)                                |

**논리 연산자:(and, not, only)를 붙여서 복잡한 조건을 만들 수 있음**

- and: 복수의 미디어 조건이 모두 참일 때 참
- not: 미디어 조건이 거짓일 때 참
- only: only 는 복수의 미디어 쿼리가 잠일 때만 스타일을 적용하는 경우에 구형 브라우저에서 잘못 처리되는 것을 막기 위해 사용. 예를 들어, only 를 쓰지 않고, screen and (max-width: 300px) 와 같이 쓸 경우, 구형 브라우저에서는 screen 까지만 읽고, 뒷 부분은 무시한 재 스타일을 적용할 수 있음.
  따라서 구형 브라우저 지원을 only screen and(max-width:300px)같이 쓰면 좋음
- 컴마(.) : 여러 미디어 조건을 컴마를 통해 나열기수 있고, 이 때는 여러 조건 중 하나만 만족해도 전체가 참,즉 or 처럼 동작
